/*! event-organiser-csv 0.3.1 */
(function(e){e(document).ready(function(){var t={};if(t.errorMessage=function(t){e("#eo-csv-error p").text(t),e("#eo-csv-error").show(),e("#eo-csv-submit").attr("disabled","disabled").hide()},t.clearError=function(){e("#eo-csv-error p").text(""),e("#eo-csv-error").hide(),e("#eo-csv-submit").removeAttr("disabled").show()},e(".eo-first-row-is-header").on("change",function(){e(".eo-csv-row-0").toggleClass("eo-csv-row-is-header",e(this).is(":checked"))}),e(".eo-csv-table-wrap").on("change",".eo-csv-col-map",function(){var t=e(this).parent("td").find(".eo-csv-col-map-meta");t.toggle("post_meta"===e(this).val()),t.attr("placeholder",e(this).find("option:selected").text())}),e('input[name="delimiter"]').change(function(){t.clearError();var o;switch(e(this).val()){case"space":o=" ";break;case"tab":o="	";break;case"semicolon":o=";";break;default:o=","}if(!eo_csv_data.hasOwnProperty("input")||!eo_csv_data.input)return t.errorMessage("Cannot read file content. Please check that the uploaded file is CSV encoded."),void 0;var a;try{a=e.csv.toArrays(eo_csv_data.input,{delimiter:'"',separator:o})}catch(r){return t.errorMessage("The CSV file is invalid with the chosen delimiter. Please try a different one."),console.log(r),e(".eo-csv-table-wrap table thead").html(""),e(".eo-csv-table-wrap table tfoot").html(""),e(".eo-csv-table-wrap table tbody").html(""),void 0}for(var s=a[0].length,c="<tr>",l=0;s>l;l++){var n="",i=l;if(0===i)n="A";else for(;i>=0;){var d=i%26;i=Math.floor(i/26)-1,n=String.fromCharCode(65+d)+n}c+="<th>"+n+"</th>"}c+="</tr>";for(var v="",h=0;a.length>h;h++){for(v+='<tr class="eo-csv-row-'+h+'">',l=0;s>l;l++){var p=a[h][l];v+='<td><div class="eo-csv-cell-content">'+p+"</div></td>"}v+="</tr>"}var m='<tr class="eo-csv-import-column-selection">';for(l=0;s>l;l++){m+='<td><select class="eo-csv-col-map" name="column_map['+l+'][col]" style="width: 100%;" data-eo-csv-col="1">'+'<option value="0"> Please select </option>';for(var u in eo_csv.columns)eo_csv.columns.hasOwnProperty(u)&&(m+='<option value="'+u+'">'+eo_csv.columns[u]+"</option>");m+='</select><input type="text" name="column_map['+l+'][other]" style="display:none" value="" class="eo-csv-col-map-meta">'+"</td>"}m+="</tr>";var f=e(".eo-csv-table-wrap table");f.find("thead").html(m+c),f.find("tbody").html(v)}),eo_csv_data.hasOwnProperty("input")&&eo_csv_data.input)for(var o=[" ","	",",",";"],a=0;o.length>a;a++){var r=o[a];try{e.csv.toArrays(eo_csv_data.input,{delimiter:'"',separator:r}),e('input[name="delimiter"]').eq(0).click();break}catch(s){continue}}else t.errorMessage("Cannot read file content. Please check that the uploaded file is CSV encoded.")})})(jQuery);